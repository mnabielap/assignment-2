<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Todolist</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
</head>


<body>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
		
		<nav class="navbar px-3 mb-3" style="">
			<span class="navbar-text mb-0 h5 text-black">Signed in as {{user.username}}</span>
			<a class="navbar-brand" href="https://id.wikipedia.org/wiki/Fakultas_Ilmu_Komputer_Universitas_Indonesia">
				<img src="https://upload.wikimedia.org/wikipedia/id/thumb/c/c3/Makara_of_Fasilkom_UI.svg/1200px-Makara_of_Fasilkom_UI.svg.png" width="120" height="45" alt="">
			</a>
			<div class="btn-group" role="group">
				<form method="post" action="{% url "todolist:create_task" %}" >
					{% csrf_token %}
					<button class="btn btn-primary me-3 navbar-btn" type="submit" name="create-task">
						Create Task
					</button>
				</form>
				<form action="{% url 'todolist:logout' %}">
					{% csrf_token %}
					<button type="submit" class="btn btn-outline-danger navbar-btn">Logout</button>
				</form>
			</div>
		</nav>

		<div class="container">
			<div class="row justify-content-around">
				{% if tasks %}
					{% for task in tasks %}
							<div class="card text-white bg-secondary mb-2 mt-2" style="max-width: 20rem; ">
								<div class="card-header mt-2" style="">
									<th>{{task.date}}</th>
								</div>
								<div class="card-body">
									<h5 class="card-title text-black">{{task.title}}</h5>
									<p class="card-text text-black">{{task.description}}</p>
									<div class="btn-group">
										<form method="post" action="{% url "todolist:update-task" task.id %}" >
											{% csrf_token %}
											<button class="btn btn-primary btn-sm me-2" type="submit" name="updatetask">
												{% if task.is_finished %} Mark Not Completed {% else %} Mark Completed {% endif %}
											</button>
										</form>
										<form method="post" action="{% url "todolist:delete-task" task.id %}" >
											{% csrf_token %}
											<button class="btn btn-danger btn-sm" type="submit" name="deletetask">
												Delete
											</button>
										</form>
									</div>
								</div>
								<div class="card-footer text-white mb-2" style="">
									{% if task.is_finished %}
										<th>Completed ✅</th>
									{% else %}
										<th>Not Completed ❌</th>
									{% endif %}
								</div>
							</div>
						{% if forloop.counter|divisibleby:3 %}
							<div class="w-100"></div>
						{% endif %}
					{% endfor %}
				{% else %}
					<legend class="h2 mt-1">No tasks listed yet</legend>
				{% endif %}
			</div>

    </body>

</html>

<style>
	.card:hover {
		transform: scale(1.02);
	  }
    body {
        text-align: center;
    }
    .container {
		margin-top: 5%;
        width: 68%;
        padding: 10px;
        border-radius: 25px;
        display: block;
    }
</style>